<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novel Dialogue Enhancer - Settings</title>
    <link rel="stylesheet" href="options.css" />
    <link rel="icon" href="images/icon128.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  </head>

  <body>
    <div class="wrapper">
      <header>
        <h1>Novel Dialogue Enhancer</h1>
        <p>Configure your extension settings for optimal dialogue enhancement</p>
      </header>

      <div class="container">
        <div class="option-grid">
          <div class="card">
            <h3>General Settings</h3>
            <div class="form-group">
              <label for="model-name">Ollama Model Name</label>
              <input id="model-name" type="text" placeholder="qwen3:8b" />
              <div class="hint">
                Specify which Ollama model to use for text enhancement.
                <div class="model-suggestions">
                  <span class="model-suggestion" data-model="qwen3:8b">qwen3:8b</span>
                  <span class="model-suggestion" data-model="llama3:8b">llama3:8b</span>
                  <span class="model-suggestion" data-model="phi3:medium">phi3:medium</span>
                </div>
              </div>
            </div>
            
            <div class="slider-container">
              <label for="temperature">
                Temperature
                <span id="temperature-value" class="slider-value">0.4</span>
              </label>
              <input
                type="range"
                id="temperature"
                min="0.1"
                max="1.0"
                step="0.1"
                value="0.4"
              />
              <div class="slider-labels">
                <span>Consistent</span>
                <span>Creative</span>
              </div>
              <div class="hint">
                Controls creativity vs. predictability. Lower values (0.1-0.4) produce more consistent outputs, while higher values (0.7-1.0) increase creativity.
              </div>
            </div>
            
            <div class="slider-container">
              <label for="top-p">
                Top P (Nucleus Sampling)
                <span id="top-p-value" class="slider-value">0.9</span>
              </label>
              <input
                type="range"
                id="top-p"
                min="0.1"
                max="1.0"
                step="0.1"
                value="0.9"
              />
              <div class="slider-labels">
                <span>Focused</span>
                <span>Diverse</span>
              </div>
              <div class="hint">
                Controls diversity of language. Lower values focus on likely words, higher values permit more diverse vocabulary.
              </div>
            </div>
          </div>

          <div class="card">
            <h3>Advanced Settings</h3>
            <div class="slider-container">
              <label for="max-chunk-size">
                Maximum Chunk Size
                <span id="max-chunk-size-value" class="slider-value">8000</span>
              </label>
              <input
                type="range"
                id="max-chunk-size"
                min="2000"
                max="16000"
                step="1000"
                value="8000"
              />
              <div class="slider-labels">
                <span>2K</span>
                <span>16K</span>
              </div>
              <div class="hint">
                Sets the maximum size of text chunks sent to Ollama. Lower values are faster but may reduce quality.
              </div>
            </div>

            <div class="slider-container">
              <label for="timeout">
                LLM Request Timeout
                <span id="timeout-value" class="slider-value">120</span>
              </label>
              <input
                type="range"
                id="timeout"
                min="30"
                max="300"
                step="30"
                value="120"
              />
              <div class="slider-labels">
                <span>30s</span>
                <span>300s</span>
              </div>
              <div class="hint">
                Maximum time to wait for LLM responses in seconds.
              </div>
            </div>

            <div class="form-group">
              <button id="test-ollama" class="button button-secondary">
                Test Ollama Connection
              </button>
              <div id="ollama-status" class="status-message" style="display: none;"></div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <h3>Site Whitelist</h3>
          <div class="whitelist-container">
            <div id="whitelist-items">
              <div class="empty-list">No sites in whitelist</div>
            </div>
          </div>
          <button id="clear-all" class="button button-danger">Clear All Sites</button>
        </div>
      </div>

      <div class="actions">
        <button id="save" class="button button-primary">Save Settings</button>
        <button id="close-btn" class="button button-secondary">Close</button>
      </div>
    </div>
    <script src="options.js"></script>
  </body>
</html>